<link rel="stylesheet" href="css/style-chat.css">

<div class="row">
    <!--Padding Trick-->
    <div class="col-lg-1"></div>
    <!--Chat Room-->
    <div class="chat_room col-lg-10">
        <div class="row">
            <!--Left Section-->
            <div class="col-lg-2">
                <!--Forum Tabs-->
                <div class="row">
                    <div class="forum_tab">
                        <input type="radio" id="forumChatRoom" ng-model="var_forum" value="chatroom">
                        <label class="forum_tab" for="forumChatRoom">
                            <img src="img/chatIcon.png" alt="Chat Room">
                            <p ng-hide="var_forum == 'chatroom'">Chat Room</p>
                            <p ng-show="var_forum == 'chatroom'" class="forum_name_selected">Chat Room</p>
                        </label>
                    </div>
                    <div class="forum_tab">
                        <input type="radio" id="forumPosts" ng-model="var_forum" value="posts">
                        <label class="forum_tab" for="forumPosts">
                            <img src="img/postIcon.png" alt="Posts">
                            <p ng-hide="var_forum == 'posts'">Posts</p>
                            <p ng-show="var_forum == 'posts'" class="forum_name_selected">Posts</p>
                        </label>
                    </div>
                    <div class="forum_tab">
                        <input type="radio" id="forumResources" ng-model="var_forum" value="resources">
                        <label class="forum_tab" for="forumResources">
                            <img src="img/fileSharingIcon.png" alt="Resources">
                            <p ng-hide="var_forum == 'resources'">Resources</p>
                            <p ng-show="var_forum == 'resources'" class="forum_name_selected">Resources</p>
                        </label>
                    </div>
                </div>
                <div class="row">
                    <!--Posts-->
                    <div id="question_and_answer" class="scrollable" ng-show="var_forum == 'posts'">
                        <div class="question_group">
                            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#post_question_modal">Post Question!</button>
                            <hr>
                            <ul class="list-group">
                                <li id="question_tiem" class="list-group-item">
                                    <div class="content">
                                        <div class="title">Creating a post</div>
                                        <div class="timestamp">4/18/17</div>
                                        <div class="snipet">This is an example for creating a post</div>
                                        <div ng-hide="true" ng-bind="message">This is the full message</div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <!--Middle Section-->
            <div class="col-lg-8">
                <!--Chat Room Name-->
                <h1>{{ var_room_name }}</h1>
                <!--Chat Room Content-->
                <div class="chat_forum_content" ng-show="var_forum == 'chatroom'">
                    <div class="chatbox" scroll-glue>
                        <div class="chat_message row" ng-repeat="m in var_messages">
                            <div class="left_avatar col-lg-1">
                                <div ng-hide="isCurrentUser(m.userId)">
                                    <img src="{{ m.profilePic }}" alt="{{ m.name }}" class="img-thumbnail">
                                    <p>{{ m.name }}</p>
                                </div>
                            </div>
                            <div class="col-lg-10">
                                <div ng-hide="isCurrentUser(m.userId)" class="left_message_box">
                                    <p class="message_time">{{ m.time }}</p>
                                    <p class="message_left">{{ m.message }}</p>
                                </div>
                                <div ng-show="isCurrentUser(m.userId)" class="right_message_box">
                                    <p class="message_time">{{ m.time }}</p>
                                    <p class="message_right">{{ m.message }}</p>
                                </div>
                            </div>
                            <div class="right_avatar col-lg-1">
                                <div ng-show="isCurrentUser(m.userId)">
                                    <img src="{{ m.profilePic }}" alt="{{ m.name }}" class="img-thumbnail">
                                    <p>{{ m.name }}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <input type="text" class="chat_message_input" ng-model="var_chat_message" ng-keypress="onChatMessageKeyPress($event)" size="70"
                    />
                    <button type="button" class="btn btn-default" ng-click="sendMsg()">Send</button>
                </div>
                <!--// TODO: Posts Content-->
                <div id="post_forum_content" ng-show="var_forum == 'posts'">
                    <div id="post_forum_question">
                        <h3 id="post_forum_title">Post Content</h3>
                        <hr>
                        <!--Question posted-->
                        <div class="media">
                            <div class="media-left">
                                <img src="/../img/img_avatar1.png" class="media-object" style="width:100px">
                            </div>
                            <div class="media-body">
                                <h4 class="media-heading">Anonymous</h4>
                                <p>This is a test</p>
                            </div>
                        </div>
                    </div>

                    <!--Answer posted-->
                    <div id="post_forum_answers">
                        <h4 class="txt-left"> Followup Discussion</h4>
                        <hr>
                        <!--Input text-->
                        <div class="form-group">
                            <label for="comment">Start a new followup discussion.</label>
                            <textarea class="form-control" rows="5" ng-model="ques_followup"></textarea>
                        </div>

                        <!--Submit button-->
                        <div>
                            <button type="button" class="btn btn-info btn-s float-left">Post</button>
                            <div class="dropup float-left">
                                <button class="btn dropdown-toggle" type="button" data-toggle="dropdown">As You
                                <span class="caret"></span></button>
                                <ul class="dropdown-menu">
                                    <li>As Anonymous</li>
                                    <li>As You</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <!--// TODO: Resources Content-->
            <!--Right Section-->
            <div class="col-lg-2">
                <!--Contact Prof-->
                <button type="button" class="contact_prof_btn btn btn-primary">Contact Prof</button>
                <!--User List-->
                <div class="user_list_wrapper">
                    <p>My Classmates</p>
                    <p>Friends</p>
                    <div class="user_list" ng-repeat="user in var_user_list | filter: {'friendOfCurrentUser': 1}">
                        <a class="user_card_li" href="">
                            <img src="{{ user.profilePic }}" alt="{{ user.name }}" class="img-thumbnail">
                            <p>{{ user.name }}</p>
                        </a>
                    </div>
                    <p>Others</p>
                    <div class="user_list" ng-repeat="user in var_user_list | filter: {'friendOfCurrentUser': 0}">
                        <a class="user_card_li" href="">
                            <img src="{{ user.profilePic }}" alt="{{ user.name }}" class="img-thumbnail">
                            <p>{{ user.name }}</p>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--Padding Trick-->
    <div class="col-lg-1"></div>
</div>

<!--Posting question form-->
<div class="modal fade" id="post_question_modal" role="dialog">
    <div class="modal-dialog">
        <!--Header-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Post Question</h4>
            </div>
            <div class="modal-body">
                <!--summary input-->
                <div class="form-group">
                    <label for="usr">Summary:</label>
                    <input type="text" class="form-control" id="post_ques_summary" ng-model="ques_summary">
                </div>

                <div class="form-group">
                    <label for="comment">Detail:</label>
                    <textarea class="form-control" rows="5" id="post_ques_detail" ng-model="ques_detail"></textarea>
                </div>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-success" ng-click="postQuestion(ques_summary, ques_detail)">Submit</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>